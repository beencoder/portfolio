@use 'base/fonts';
@use 'base/reset';
@use 'index' as *;

:root {
  --color-bg: #{$color-bg};
  --color-surface: #{$color-surface};
  --color-surface-alt: #{$color-surface-alt};
  --color-border: #{$color-border};
  --color-text: #{$color-text};
  --color-text-muted: #{$color-text-muted};
  --color-text-inverse: #{$color-text-inverse};
  --color-primary: #{$color-primary};
  --color-primary-hover: #{$color-primary-hover};
  --color-primary-active: #{$color-primary-active};
  --color-secondary: #{$color-secondary};
  --color-on-primary: #{$color-on-primary};
  --color-on-surface: #{$color-on-surface};
  --color-on-surface-alt: #{$color-on-surface-alt};
  --color-shadow: #{$color-shadow};
  --color-success: #{$color-success};
  --color-warning: #{$color-warning};
  --color-error: #{$color-error};
  --color-focus: #{$color-focus};
  --color-info: #{$color-info};
  --color-overlay: #{$color-overlay};

  --space-1: #{$space-1};
  --space-2: #{$space-2};
  --space-3: #{$space-3};
  --space-4: #{$space-4};
  --space-5: #{$space-5};
  --space-6: #{$space-6};
  --space-8: #{$space-8};
  --space-10: #{$space-10};
  --space-12: #{$space-12};

  --container-max: #{$container-max};
  --header-offset: #{$header-offset};
  --grid-gap: #{$grid-gap};
  --space-section: #{$space-section};

  --radius-sm: #{$radius-sm};
  --radius-md: #{$radius-md};
  --radius-lg: #{$radius-lg};
  --shadow-sm: #{$shadow-sm};
  --shadow-md: #{$shadow-md};
  --shadow-lg: #{$shadow-lg};

  --transition-main: cubic-bezier(0.11, 0.82, 0.39, 0.92);
  --ease-power1-out: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --ease-power3-out: cubic-bezier(0.165, 0.84, 0.44, 1);
  --ease-power1-in-out: cubic-bezier(0.455, 0.03, 0.515, 0.955);
  --ease-power2-in-out: cubic-bezier(0.65, 0, 0.35, 1);
  --ease-power3-in-out: cubic-bezier(0.76, 0, 0.24, 1);
  --ease-power4-in-out: cubic-bezier(0.37, 0.01, 0.18, 0.98);

  --step--1: 0.875rem;
  --step-0: 1rem;
  --step-1: 1.25rem;
  --step-2: 1.5rem;
  --step-3: 2rem;
  --step-4: 2.75rem;
  --lh-tight: 1.2;
  --lh-normal: 1.5;
  --lh-loose: 1.7;
}

html {
  font-size: clamp(
    #{$fluid-min-root},
    calc(
      #{$fluid-min-root} + (#{$fluid-max-root - $fluid-min-root}) * ((100vw - #{$fluid-min-vw}) /
            (#{$fluid-max-vw - $fluid-min-vw}))
    ),
    #{$fluid-max-root}
  );
  background: var(--color-bg) url(/images/common/bg-paper.webp);
  background-size: 7.5rem;
  scroll-padding-top: var(--header-offset);
}
html.is-scroll-locked {
  overflow: hidden !important;

  body {
    overflow: hidden !important;
  }
}
html.lenis {
  height: auto;
}
.lenis.lenis-smooth {
  scroll-behavior: auto;
}
.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}
.lenis.lenis-stopped {
  overflow: hidden;
}
.lenis.lenis-scrolling iframe {
  pointer-events: none;
}
@supports not (font-size: clamp(1px, 2px, 3px)) {
  html {
    font-size: #{$fluid-min-root};
  }
}

body {
  font-family: 'Lato', 'Spoqa Han Sans Neo', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue',
    Arial, 'Noto Sans KR', sans-serif;
  font-size: var(--step-0);
  line-height: var(--lh-normal);
  color: var(--color-text, #{$color-text});
  // background-color: var(--color-bg, #{$color-bg});
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  // color: var(--color-text);
  text-decoration: none;
}
a,
button {
  &:focus-visible {
    @include focus-ring;
  }
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-weight: 400;
  line-height: var(--lh-tight);
}
p strong {
  font-weight: 700;
  color: var(--color-primary-active);
}
p {
  word-break: keep-all;
  // white-space: pre-line;
}

/* layout */
.main {
  scroll-margin-top: var(--header-offset);
}
.section {
  position: relative;
  overflow: hidden;

  &:first-of-type {
    min-height: 100dvh;
  }
  &:not(:first-of-type) {
    padding-block: var(--space-section);
  }
  &:focus-visible {
    @include focus-ring;
  }
  &::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    background-color: var(--color-bg, #ece4d4);
    mix-blend-mode: multiply;
  }
}
.container {
  @include container();
}
.icon {
  width: 100%;
  height: auto;
}
.text-icon {
  width: 1em;
  height: 1em;
}

/* 스크린리더 전용 */
.sr-only {
  @include sr-only;

  &:focus,
  &:focus-visible {
    @include sr-only-focus;
  }
}

@media (pointer: coarse) {
  .cursor-wrap {
    display: none !important;
  }
}

@include respond(max, lg) {
  :root {
    --space-section: 120px;
    --shadow-lg: #{$shadow-sm};
  }
  .container {
    max-width: min(100% - 24px * 2, var(--container-max, 1920px));
  }
}

@include respond(max, md) {
  :root {
    --header-offset: 70px;
  }
}
