@use 'sass:map';
@use 'sass:math';
@use 'variables' as *;

/* px → rem */
@function rem($px) {
  @return math.div($px, 10) * 1rem;
}

/* 폰트 */
@mixin font($size, $color: null, $weight: 400, $lineheight: null) {
  font-size: rem($size);
  @if $color {
    color: $color;
  }
  font-weight: $weight;
  @if $lineheight {
    line-height: rem($lineheight);
  }
}

@mixin font12($color: #000, $weight: 400, $lineheight: 18) {
  @include font($font-size-12, $color, $weight, $lineheight);
}
@mixin font14($color: #000, $weight: 400, $lineheight: 20) {
  @include font($font-size-14, $color, $weight, $lineheight);
}
@mixin font16($color: #000, $weight: 400, $lineheight: 24) {
  @include font($font-size-16, $color, $weight, $lineheight);
}
@mixin font20($color: #000, $weight: 600, $lineheight: 28) {
  @include font($font-size-20, $color, $weight, $lineheight);
}

/* z-index 레이어 헬퍼 */
@function layer($name) {
  @return map.get($z-stack, $name);
}

/* 반응형 미디어쿼리: @include respond(md) { ... } */
@mixin respond($bp) {
  $value: map.get($breakpoints, $bp);
  @if $value == null {
    @error "Unknown breakpoint `#{$bp}`. Use #{map.keys($breakpoints)}";
  }
  @media (min-width: $value) {
    @content;
  }
}

/* 유동 타이포그래피: clamp(min, vw 기반, max) */
@mixin fluid-type($min, $max, $min-vw: 360px, $max-vw: 1280px) {
  font-size: clamp(
    #{$min},
    calc(#{$min} + (#{strip-unit($max - $min)} * ((100vw - #{$min-vw}) / #{strip-unit($max-vw - $min-vw)}))),
    #{$max}
  );
}

/* 중앙 정렬 */
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 1줄 말줄임 */
@mixin truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* N줄 말줄임: @include multiline-truncate(2); */
@mixin multiline-truncate($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* 스크린리더 전용 (접근성) */
@mixin sr-only {
  position: absolute !important;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  border: 0;
  clip: rect(0 0 0 0);
  overflow: hidden;
  white-space: nowrap;
}
@mixin sr-only-focus {
  position: static !important;
  width: auto;
  height: auto;
  margin: 0;
  padding: 0.5rem 0.75rem;
  clip: auto;
  background: #000;
  color: #fff;
  border-radius: 0.25rem;
  outline: 2px solid #fff;
  z-index: 1000;
}

/* 버튼 스타일 샘플 */
@mixin button-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  padding: 0.8rem 1.6rem;
  border-radius: $radius-md;
  border: 1px solid $color-border;
  background: transparent;
  color: $color-text;
  box-shadow: $shadow-sm;
  transition: transform 0.08s ease, box-shadow 0.2s ease, background 0.2s ease;
  @media (hover: hover) {
    &:hover {
      box-shadow: $shadow-md;
    }
  }
  &:active {
    transform: translateY(1px);
  }
}

/* 컨테이너 util */
@mixin container($max: 1200px, $gutter: 1.6rem) {
  width: min(100% - $gutter * 2, $max);
  margin-inline: auto;
}
